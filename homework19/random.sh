#!/bin/bash
: << "DOC"
Linux: Домашнее задание 19 (Python)
Создайте на сервере linux.itcareerhub.de в своей папке /opt 2 дополнительных директории. 
В первой директории найдите способ (например написав скрипт или выполнив команду в терминале) создать 100 файлов со случайными названиями с использованием $RANDOM. Например файлы  15358 9396 240.
Напишите скрипт, который будет переносить в другую директорию файлы, если число, стоящее в названии четное - то перенести файлы в другую директорию, если нет - оставить в текущей. 
Пришлите команды или скрипты, с помощью которых Вы выполнили задание.

cd /opt/101025-ptm/viktorplus/
nano random.sh

DOC

set -euo pipefail
# set — встроенная команда bash для включения режимов безопасности.
# -e  : выйти сразу, если любая команда завершилась с ненулевым кодом (ошибка).
# -u  : ошибка при обращении к неинициализированной переменной (ловит опечатки).
# -o pipefail : если в пайпе (cmd1 | cmd2) упала любая команда, пайп считается ошибочным.
#               Без pipefail bash обычно возвращает код только последней команды.

random_dir="random/odd"
# Переменная с относительным путём к папке-источнику.
# odd = "нечётные" (так названа папка, куда складываются все созданные файлы).

even_dir="random/even"
# Переменная с относительным путём к папке-приёмнику для "чётных" (по последней цифре имени).

mkdir -p "$PWD/$random_dir" "$PWD/$even_dir"
# mkdir — создать директории.
# -p   — "parents": создать всю цепочку директорий, и не ругаться, если они уже существуют.
# "$PWD" — текущая рабочая директория системная переменная окружения.
# Кавычки "..." защищают от пробелов/спецсимволов в пути.

for i in {1..100}; do
  # for — цикл. {1..100} — brace expansion bash: сгенерирует 1 2 3 ... 100.
  # i — счётчик цикла

  touch "$PWD/$random_dir/$RANDOM"
  # touch — создать пустой файл.
  # $RANDOM — встроенная переменная bash: псевдослучайное число 0..32767.
  # Имя файла = число, чтобы дальше можно было проверять последнюю цифру.
done

script_dir="$(cd "$(dirname "$0")" && pwd)"
# script_dir — абсолютный путь к папке, где лежит этот скрипт.
# Разбор конструкции:
#   $0 — как был запущен скрипт (путь/имя).
#   dirname "$0" — взять только директорию из пути (например, ./ -> .).
#   cd "$(dirname "$0")" — перейти в эту директорию.
#   && pwd — если cd успешен, вывести абсолютный путь (pwd = print working directory).
#   $(...) — command substitution: подставить вывод команды как строку.
# Зачем так:
#   чтобы reliably вызвать remove_even.sh рядом со скриптом, даже если запустили из другой папки.

"$script_dir/remove_even.sh" "$PWD/$random_dir" "$PWD/$even_dir"
# Вызываем второй скрипт и передаём 2 аргумента:
#   1) исходная директория (odd)
#   2) целевая директория (even)
# Кавычки вокруг пути к скрипту важны: если в пути будут пробелы — не сломается.



